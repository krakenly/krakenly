<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krakenly</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶ë</text></svg>">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ü¶ë Krakenly</h1>
            <div id="status" class="status">
                <span class="status-dot"></span>
                <span class="status-text">Checking...</span>
            </div>
        </header>

        <nav class="tabs">
            <button class="tab active" data-tab="index">üìÅ Index Management</button>
            <button class="tab" data-tab="search">üîç Search</button>
            <button class="tab" data-tab="chat">üí¨ Chat</button>
        </nav>

        <!-- Index Management Tab -->
        <section id="index-tab" class="tab-content active">
            <div class="card">
                <h2>Upload Files</h2>
                <div class="upload-area" id="upload-area">
                    <input type="file" id="file-input" multiple accept=".txt,.md,.json,.py,.js,.html,.css,.yaml,.yml,.xml,.csv">
                    <div class="upload-prompt">
                        <span class="upload-icon">üì§</span>
                        <p>Drag & drop files here or click to browse</p>
                        <p class="upload-hint">Supported: .txt, .md, .json, .py, .js, .html, .css, .yaml, .xml, .csv</p>
                    </div>
                </div>
                <div id="upload-progress" class="upload-progress hidden">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <p class="progress-text">Uploading...</p>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2>Indexed Sources</h2>
                    <button id="refresh-sources" class="btn btn-secondary">‚Üª Refresh</button>
                </div>
                <div class="stats" id="stats">
                    <div class="stat">
                        <span class="stat-value" id="total-sources">-</span>
                        <span class="stat-label">Sources</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="total-chunks">-</span>
                        <span class="stat-label">Chunks</span>
                    </div>
                </div>
                <table class="sources-table" id="sources-table">
                    <thead>
                        <tr>
                            <th>Source</th>
                            <th>Chunks</th>
                            <th>Size</th>
                            <th>Indexed At</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="sources-body">
                        <tr>
                            <td colspan="5" class="empty-state">Loading...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Search Tab -->
        <section id="search-tab" class="tab-content">
            <div class="card">
                <h2>Semantic Search</h2>
                <div class="search-form">
                    <input type="text" id="search-input" placeholder="Enter your search query..." class="search-input">
                    <button id="search-btn" class="btn btn-primary">Search</button>
                </div>
                <p class="search-hint">üí° Search depth and response length are auto-optimized based on your query complexity.</p>
            </div>
            <div class="card" id="search-results-card" style="display: none;">
                <h2>Results</h2>
                <div id="search-results"></div>
            </div>
        </section>

        <!-- Chat Tab -->
        <section id="chat-tab" class="tab-content">
            <div class="card chat-container">
                <div class="chat-messages" id="chat-messages">
                    <div class="message assistant">
                        <div class="message-content">
                            Hello! I'm Krakenly, your data-grounded AI assistant. Ask me anything about your indexed data!
                        </div>
                    </div>
                </div>
                <div class="chat-input-area">
                    <textarea id="chat-input" placeholder="Type your message..." rows="2"></textarea>
                    <button id="chat-send" class="btn btn-primary">Send</button>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <a href="https://github.com/krakenly/krakenly" target="_blank" rel="noopener">ü¶ë Krakenly on GitHub</a>
    </footer>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Confirm Delete</h3>
            <p>Are you sure you want to delete <strong id="delete-source-name"></strong>?</p>
            <p class="warning">This will remove all indexed chunks from this source.</p>
            <div class="modal-actions">
                <button id="cancel-delete" class="btn btn-secondary">Cancel</button>
                <button id="confirm-delete" class="btn btn-danger">Delete</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
